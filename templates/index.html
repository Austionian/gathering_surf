{% extends "base.html" %} {% block body %}
<script src="//unpkg.com/alpinejs" defer></script>
<div>
  {% include "includes/nav.html" %} {% include "includes/live_feed.html" %}
  <div>
    {% include "includes/header.html" %}
    <main>
      <div id="latest-container">
        <header>
          <div
            class="sticky top-[64px] z-10 flex flex-col-reverse items-start justify-between gap-x-8 gap-y-2 border-b border-white/15 bg-black/90 px-4 py-4 sm:flex-row sm:items-center sm:px-6 lg:px-8"
          >
            <div class="flex items-center">
              <h1
                class="mb-0 flex gap-x-3 text-xl leading-7 text-white sm:self-center sm:text-2xl"
              >
                Right Now
              </h1>
              {% if spot.live_feed_url %}
              <button class="ml-2" @click="showLiveFeed = true">
                <svg
                  class="fill-gray-300 hover:fill-gray-500"
                  height="20px"
                  width="20px"
                  version="1.1"
                  id="Capa_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  viewBox="0 0 284.248 284.248"
                  xml:space="preserve"
                >
                  <path
                    d="M278.523,59.236c-1.646-0.899-3.46-1.345-5.27-1.345c-2.073,0-4.141,0.584-5.946,1.742L209.141,95.09V74.802  c-0.001-9.763-7.917-17.678-17.677-17.678H17.678C7.915,57.124,0,65.039,0,74.802v134.645c0,9.763,7.915,17.678,17.678,17.678  h173.786c9.76,0,17.676-7.915,17.676-17.678v-20.29l58.166,35.457c1.804,1.159,3.868,1.742,5.944,1.742  c1.807,0,3.624-0.448,5.272-1.345c3.528-1.927,5.725-5.632,5.725-9.657V68.895C284.249,64.87,282.052,61.164,278.523,59.236z   M254.482,181.933l-45.341-27.64v-24.34l45.341-27.64V181.933z"
                  />
                </svg>
              </button>
              {% endif %}
            </div>
            <div
              id="as-of-container"
              class="order-first flex animate-pulse rounded-full bg-gray-400/10 px-3 py-1 font-mono text-xs font-medium text-gray-500 ring-1 ring-inset ring-gray-400/30 sm:order-none"
            >
              <span id="as-of">____________________________</span>
            </div>
          </div>

          <!-- Stats -->
          <div class="grid grid-cols-2 bg-gray-700/10 lg:grid-cols-3">
            <div class="border-t border-white/5 px-4 py-3 sm:p-3 lg:px-8">
              <p class="text-sm font-medium leading-6 text-gray-400">Waves</p>
              <div class="mt-2 flex items-baseline gap-x-2">
                <div
                  style="
                    width: 6px;
                    height: 64px;
                    border-radius: 99px;
                    margin: auto 10px auto 0;
                  "
                  class="wave-quality-loader animate-pulse bg-gray-700"
                ></div>
                <div
                  id="wave-quality"
                  class="mr-[10px] hidden h-16 w-[6px] self-center rounded-full"
                ></div>
                <div class="flex flex-col">
                  <div class="flex items-baseline space-x-1">
                    <div
                      class="wavey h-[40px] w-[40px] animate-pulse rounded-xl bg-gray-700"
                    ></div>
                    <span
                      id="current-wave-height"
                      class="text-2xl font-semibold tracking-tight text-white sm:text-4xl"
                    >
                    </span>
                    <span class="text-sm text-gray-400">ft</span>
                    <span class="text-sm text-gray-400">@</span>
                    <div
                      id="wavey-period-loader"
                      class="h-[20px] w-[10px] animate-pulse rounded bg-gray-700"
                    ></div>
                    <span class="text-gray-400">
                      <span
                        id="current-wave-period"
                        class="text-lg font-semibold text-white"
                      >
                      </span
                      >s
                    </span>
                    <div
                      class="mr-2 h-4 w-4 fill-white pt-[3px]"
                      id="wave-icon-container"
                    >
                      <svg
                        id="wave-icon"
                        class="transition"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 32 32"
                      >
                        <title>wave direction</title>
                        <path
                          d="M26.71,10.29l-10-10a1,1,0,0,0-1.41,0l-10,10,1.41,1.41L15,3.41V32h2V3.41l8.29,8.29Z"
                        />
                      </svg>
                    </div>
                  </div>
                  <div class="flex items-baseline">
                    <div
                      class="wave-quality-loader h-[20px] w-[40px] animate-pulse rounded-xl bg-gray-700"
                    ></div>
                    <div
                      id="wave-quality-text"
                      class="mt-2 text-xl font-semibold leading-3 tracking-tight text-white"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="border-t border-white/5 px-4 py-3 sm:border-l sm:p-3 lg:px-8"
            >
              <p class="text-sm font-medium leading-6 text-gray-400">Wind</p>
              <div
                class="mt-2 flex items-baseline gap-x-2 text-2xl font-semibold tracking-tight text-white sm:text-4xl"
              >
                <div
                  class="mr-2 h-6 w-6 fill-white sm:h-8 sm:w-8"
                  id="wind-icon-container"
                >
                  <svg
                    id="wind-icon"
                    class="transition"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 32 32"
                  >
                    <title>wind direction</title>
                    <path
                      d="M26.71,10.29l-10-10a1,1,0,0,0-1.41,0l-10,10,1.41,1.41L15,3.41V32h2V3.41l8.29,8.29Z"
                    />
                  </svg>
                </div>
                <div
                  class="latest-loader h-[40px] w-[40px] animate-pulse rounded-xl bg-gray-700"
                ></div>
                <span id="wind"></span>
                <span class="text-sm text-gray-400">mph</span>
              </div>
            </div>
            <div
              class="flex justify-between border-t border-white/5 px-4 py-3 sm:px-6 lg:border-l lg:px-8"
            >
              <div>
                <p class="text-sm font-medium leading-6 text-gray-400">
                  Water Temp
                </p>
                <div
                  class="mt-2 flex items-baseline gap-x-2 text-2xl font-semibold tracking-tight text-white sm:text-4xl"
                >
                  <div
                    class="latest-loader h-[40px] w-[40px] animate-pulse rounded-xl bg-gray-700"
                  ></div>
                  <span id="current-water-temp"></span>
                  <span
                    class="text-sm font-semibold tracking-tight text-gray-400"
                    >°F</span
                  >
                </div>
              </div>
            </div>
            <div
              class="flex justify-between border-t border-white/5 px-4 py-3 sm:px-6 lg:hidden lg:border-l lg:px-8"
            >
              <div>
                <p class="text-sm font-medium leading-6 text-gray-400">
                  Air Temp
                </p>
                <div
                  class="mt-2 flex items-baseline gap-x-2 text-2xl font-semibold tracking-tight text-white sm:text-4xl"
                >
                  <div
                    class="latest-loader h-[40px] w-[40px] animate-pulse rounded-xl bg-gray-700"
                  ></div>
                  <span id="current-air-temp-2"></span>
                  <span
                    class="text-sm font-semibold tracking-tight text-gray-400"
                    >°F</span
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="grid grid-cols-1 bg-gray-700/10 lg:grid-cols-2">
            <div
              class="border-b border-t border-white/5 px-4 py-3 text-gray-300 sm:p-3 lg:px-8"
            >
              <div id="water-quality-container">
                <p class="mr-2 text-sm font-medium leading-6 text-gray-400">
                  Beach Status
                </p>
                <div
                  class="water-quality-loader mt-2 h-[40px] w-80 animate-pulse rounded-xl bg-gray-700"
                ></div>
                <div class="hidden" id="current-water-quality">
                  <div
                    class="mt-2 flex items-baseline gap-x-2 text-xl font-semibold tracking-tight text-white sm:text-4xl"
                  >
                    <span id="current-water-quality-title"></span>
                    <span
                      id="current-water-quality-status-text"
                      class="text-sm font-light tracking-tight text-gray-300 sm:text-lg"
                    ></span>
                  </div>
                </div>
              </div>
              <div id="water-quality-error"></div>
            </div>
            <div
              class="hidden border-b border-t border-white/5 px-4 py-3 sm:border-l sm:p-3 lg:block lg:px-8"
            >
              <p class="text-sm font-medium leading-6 text-gray-400">
                Air Temp
              </p>
              <div
                class="mt-2 flex items-baseline gap-x-2 text-2xl font-semibold tracking-tight text-white sm:text-4xl"
              >
                <div
                  class="latest-loader h-[40px] w-[40px] animate-pulse rounded-xl bg-gray-700"
                ></div>
                <span id="current-air-temp"></span>
                <span class="text-sm font-semibold tracking-tight text-gray-400"
                  >°F</span
                >
              </div>
            </div>
          </div>
        </header>
      </div>
      <div id="latest-error"></div>

      <!-- Forecast Chart -->
      <div id="forecast-container" class="mt-14 sm:mt-16">
        <div>
          <div
            class="sticky top-[64px] z-10 mb-10 flex items-start justify-between gap-x-8 gap-y-2 border-b border-white/15 bg-black/90 px-4 py-4 sm:flex-row sm:items-center sm:px-6 lg:px-8"
          >
            <div class="flex flex-col lg:w-full lg:flex-row lg:justify-between">
              <div>
                <h1
                  class="mb-0 flex gap-x-3 text-xl leading-7 text-white sm:self-center sm:text-2xl"
                >
                  <span class="hidden lg:block">This Week</span
                  ><span class="block lg:hidden">Forecast</span>
                </h1>
              </div>
              <div
                id="forecast-as-of-container"
                class="hidden max-h-[24px] animate-pulse items-center rounded-full bg-gray-400/10 px-3 py-1 font-mono text-xs font-medium text-gray-500 ring-1 ring-inset ring-gray-400/30 sm:order-none lg:flex"
              >
                <span id="forecast-as-of">____________________________</span>
              </div>
            </div>
            <div class="flex space-x-2 lg:hidden">
              <button
                disabled
                id="forecast-backward"
                class="group rounded-full border border-white px-2 font-mono hover:border-gray-300 hover:fill-gray-300 hover:text-gray-300 disabled:border-zinc-700 disabled:text-zinc-700"
              >
                &larr;
              </button>
              <span id="forecast-range" class="min-w-10 text-center md:min-w-32"
                >__________</span
              >
              <button
                id="forecast-foreward"
                class="group rounded-full border border-white px-2 font-mono hover:border-gray-300 hover:fill-gray-300 hover:text-gray-300 disabled:border-zinc-700 disabled:text-zinc-700"
              >
                &rarr;
              </button>
            </div>
          </div>
          <div class="px-4 sm:px-6 md:space-y-16 lg:px-8">
            <div>
              <h2 class="select-none text-lg font-bold text-gray-500">Waves</h2>
              {% include "includes/chartLoader.html" %}
              <div
                class="flex max-h-96 select-none justify-center lg:max-h-[600px]"
              >
                <canvas class="hidden" id="forecast"></canvas>
              </div>
              {% include "includes/forecastLegend.html" %}
            </div>
            <div>
              <h2 class="my-8 select-none text-lg font-bold text-gray-500">
                Temperature
              </h2>
              {% include "includes/chartLoader.html" %}
              <div
                class="mt-4 flex max-h-96 select-none justify-center lg:max-h-[600px]"
              >
                <canvas class="hidden" id="temperature-forecast"></canvas>
              </div>
              {% include "includes/temperatureLegend.html" %}
            </div>
            <div class="mb-20">
              <h2 class="my-8 select-none text-lg font-bold text-gray-500">
                Precipitation
              </h2>
              {% include "includes/chartLoader.html" %}
              <div
                class="mt-4 flex max-h-96 select-none justify-center lg:max-h-[600px]"
              >
                <canvas class="hidden" id="precipitation-forecast"></canvas>
              </div>
              {% include "includes/precipitationLegend.html" %}
            </div>
          </div>
          <div
            id="forecast-as-of-container-2"
            class="m-auto flex w-fit animate-pulse items-center rounded-full bg-gray-400/10 px-2 py-1 font-mono text-xs font-medium text-gray-500 ring-1 ring-inset ring-gray-400/30 sm:order-none md:mt-10 lg:hidden"
          >
            <span id="forecast-as-of-2">____________________________</span>
          </div>
        </div>
      </div>
      <div id="forecast-error"></div>
    </main>
  </div>
</div>
{% endblock %}
